# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=slapi-nis
pkgver=0.52
pkgrel=1
pkgdesc="NIS Server and Schema Compatibility plugins for Directory Server"
arch=('i686' 'x86_64')
url="http://slapi-nis.fedorahosted.org/"
license=('GPL')
depends=('389-ds-base' 'libtirpc' 'nspr' 'nss' 'openldap' 'tcp_wrappers')
options=('!libtool')
source=("https://fedorahosted.org/releases/s/l/slapi-nis/slapi-nis-${pkgver}.tar.gz")
sha512sums=('83b564a2e8b197b2c962827d6e0f71bf2604a8d0ef3c5f82e218f2ac30802d6534a14c16b3984ca4e46c541232d77aa0c8dfa7b41c827ba6b7e9d5a7624f2a7e')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  ./configure \
    --prefix=/usr \
    --sbindir=/usr/bin \
    --disable-static \
    --with-tcp-wrappers \
    --with-ldap=openldap

  make
}

check() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  # 389 needs to be running for this to work
  #make check
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}/" install
}

# vim:set ts=2 sw=2 et:
