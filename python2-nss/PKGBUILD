# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

# The documentation fails to build right now

pkgname=python2-nss
pkgver=0.15.0
pkgrel=1
pkgdesc="Python 2 bindings for NSS and NSPR"
arch=(i686 x86_64)
url="ftp://ftp.mozilla.org/pub/mozilla.org/security/python-nss"
license=(MPL GPL LGPL)
depends=(python2 nspr nss)
#makedepends=(python2-distribute python2-docutils epydoc)
makedepends=(python2-distribute)
options=(!emptydirs)
# Official mirror isn't working. We'll use Fedora's mirror
source=("ftp://ftp.mozilla.org/pub/mozilla.org/security/python-nss/releases/PYNSS_RELEASE_${pkgver//./_}/src/python-nss-${pkgver}.tar.bz2")
source=("http://pkgs.fedoraproject.org/repo/extras/python-nss/python-nss-${pkgver}.tar.bz2/ae1bad305626fa984b7e71cedc872ef7/python-nss-${pkgver}.tar.bz2")
sha512sums=('c0819eaf5bc66cb07c1c02e0bebe41c33ba128832a0d34beccac1c571ac8020dddd62435a666179a5243caf3900d17eae5924860caa0ffa4367f18cc9d63138c')

build() {
  cd "python-nss-${pkgver}"

  python2 setup.py build
  #python2 setup.py build_doc
}

package() {
  cd "python-nss-${pkgver}"

  python2 setup.py install --skip-build --root="${pkgdir}/" --optimize=1
  #python2 setup.py install_doc --skip-build
}
